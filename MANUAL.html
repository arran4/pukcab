<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Pukcab User’s Guide</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="data:text/css,%23TOC%20%7B%0A%20%20%20%20background%2Dcolor%3A%20%23F2F2F2%3B%0A%20%20%20%20position%3A%20fixed%3B%0A%20%20%20%20width%3A%2016em%3B%0A%20%20%20%20left%3A%200px%3B%0A%20%20%20%20top%3A%200px%3B%0A%20%20%20%20border%2Dright%3A%201px%20solid%20%23DDD%3B%0A%20%20%20%20border%2Dbottom%3A%200px%20none%3B%0A%20%20%20%20z%2Dindex%3A%201000%3B%0A%20%20%20%20padding%3A%201%2E25em%201em%3B%0A%20%20%20%20height%3A%20100%25%3B%0A%20%20%20%20overflow%3A%20auto%3B%0A%7D%0A%23TOC%20ul%20%7B%0A%20%20%20%20list%2Dstyle%2Dtype%3A%20none%3B%0A%20%20%20%20font%2Dsize%3A%20%2E9em%3B%0A%7D%0A%0Abody%20%7B%0A%20%20%20%20%2Dms%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%0A%20%20%20%20%2Dwebkit%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%0A%20%20%20%20color%3A%20%23333%3B%0A%20%20%20%20font%2Dfamily%3A%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20%22Segoe%20UI%22%2C%20Arial%2C%20freesans%2C%20sans%2Dserif%3B%0A%20%20%20%20word%2Dwrap%3A%20break%2Dword%3B%0A%20%20%20%20padding%2Dleft%3A%2017em%3B%0A%20%20%20%20padding%2Dright%3A%200px%3B%0A%7D%0Aa%20%7B%20background%3A%20transparent%20%7D%0Aa%3Aactive%2C%0Aa%3Ahover%20%7B%20outline%3A%200%20%7D%0Astrong%20%7B%20font%2Dweight%3A%20bold%20%7D%0Ah1%20%7B%0A%20%20%20%20font%2Dsize%3A%202em%3B%0A%20%20%20%20margin%3A%200%2E67em%200%3B%0A%7D%0Aimg%20%7B%20border%3A%200%20%7D%0Ahr%20%7B%0A%20%20%20%20box%2Dsizing%3A%20content%2Dbox%3B%0A%20%20%20%20height%3A%200%3B%0A%7D%0Apre%20%7B%20overflow%3A%20auto%20%7D%0Acode%2C%0Akbd%2C%0Apre%20%7B%0A%20%20%20%20font%2Dfamily%3A%20monospace%2C%20monospace%3B%0A%20%20%20%20font%2Dsize%3A%201em%3B%0A%7D%0Ainput%20%7B%0A%20%20%20%20color%3A%20inherit%3B%0A%20%20%20%20font%3A%20inherit%3B%0A%20%20%20%20margin%3A%200%3B%0A%7D%0Ahtml%20input%5Bdisabled%5D%20%7B%20cursor%3A%20default%20%7D%0Ainput%20%7B%20line%2Dheight%3A%20normal%20%7D%0Ainput%5Btype%3D%22checkbox%22%5D%20%7B%0A%20%20%20%20box%2Dsizing%3A%20border%2Dbox%3B%0A%20%20%20%20padding%3A%200%3B%0A%7D%0Atable%20%7B%0A%20%20%20%20border%2Dcollapse%3A%20collapse%3B%0A%20%20%20%20border%2Dspacing%3A%200%3B%0A%7D%0Atd%2C%0Ath%20%7B%20padding%3A%200%20%7D%0A%2A%20%7B%20box%2Dsizing%3A%20border%2Dbox%20%7D%0Ainput%20%7B%20font%3A%2013px%2F1%2E4%20Helvetica%2C%20arial%2C%20nimbussansl%2C%20liberationsans%2C%20freesans%2C%20clean%2C%20sans%2Dserif%2C%20%22Segoe%20UI%20Emoji%22%2C%20%22Segoe%20UI%20Symbol%22%20%7D%0Aa%20%7B%0A%20%20%20%20color%3A%20%234183c4%3B%0A%20%20%20%20text%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%2C%0Aa%3Aactive%20%7B%20text%2Ddecoration%3A%20underline%20%7D%0Ahr%20%7B%0A%20%20%20%20height%3A%200%3B%0A%20%20%20%20margin%3A%2015px%200%3B%0A%20%20%20%20overflow%3A%20hidden%3B%0A%20%20%20%20background%3A%20transparent%3B%0A%20%20%20%20border%3A%200%3B%0A%20%20%20%20border%2Dbottom%3A%201px%20solid%20%23ddd%3B%0A%7D%0Ahr%3Abefore%20%7B%0A%20%20%20%20display%3A%20table%3B%0A%20%20%20%20content%3A%20%22%22%3B%0A%7D%0Ahr%3Aafter%20%7B%0A%20%20%20%20display%3A%20table%3B%0A%20%20%20%20clear%3A%20both%3B%0A%20%20%20%20content%3A%20%22%22%3B%0A%7D%0Ah1%2C%0Ah2%2C%0Ah3%2C%0Ah4%2C%0Ah5%2C%0Ah6%20%7B%0A%20%20%20%20margin%2Dtop%3A%2015px%3B%0A%20%20%20%20margin%2Dbottom%3A%2015px%3B%0A%20%20%20%20line%2Dheight%3A%201%2E1%3B%0A%7D%0Ablockquote%20%7B%20margin%3A%200%20%7D%0Aul%2C%0Aol%20%7B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20margin%2Dtop%3A%200%3B%0A%20%20%20%20margin%2Dbottom%3A%200%3B%0A%7D%0Aol%20ol%2C%0Aul%20ol%20%7B%20list%2Dstyle%2Dtype%3A%20lower%2Droman%20%7D%0Aul%20ul%20ol%2C%0Aul%20ol%20ol%2C%0Aol%20ul%20ol%2C%0Aol%20ol%20ol%20%7B%20list%2Dstyle%2Dtype%3A%20lower%2Dalpha%20%7D%0Add%20%7B%20margin%2Dleft%3A%200%20%7D%0Acode%20%7B%20font%2Dfamily%3A%20Consolas%2C%20%22Liberation%20Mono%22%2C%20Menlo%2C%20Courier%2C%20monospace%20%7D%0Apre%20%7B%0A%20%20%20%20margin%2Dtop%3A%200%3B%0A%20%20%20%20margin%2Dbottom%3A%200%3B%0A%20%20%20%20font%3A%2012px%20Consolas%2C%20%22Liberation%20Mono%22%2C%20Menlo%2C%20Courier%2C%20monospace%3B%0A%7D%0Aa%3Anot%28%3Alink%29%3Anot%28%3Avisited%29%20%7B%0A%20%20%20%20color%3A%20inherit%3B%0A%20%20%20%20text%2Ddecoration%3A%20none%3B%0A%7D%0A%2Eanchor%20%7B%0A%20%20%20%20position%3A%20absolute%3B%0A%20%20%20%20top%3A%200%3B%0A%20%20%20%20left%3A%200%3B%0A%20%20%20%20display%3A%20block%3B%0A%20%20%20%20padding%2Dright%3A%206px%3B%0A%20%20%20%20padding%2Dleft%3A%2030px%3B%0A%20%20%20%20margin%2Dleft%3A%20%2D30px%3B%0A%7D%0A%2Eanchor%3Afocus%20%7B%20outline%3A%20none%20%7D%0Ah1%2C%0Ah2%2C%0Ah3%2C%0Ah4%2C%0Ah5%2C%0Ah6%20%7B%0A%20%20%20%20position%3A%20relative%3B%0A%20%20%20%20margin%2Dtop%3A%201em%3B%0A%20%20%20%20margin%2Dbottom%3A%2016px%3B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%20%20%20%20line%2Dheight%3A%201%2E4%3B%0A%7D%0Ah1%20%2Eocticon%2Dlink%2C%0Ah2%20%2Eocticon%2Dlink%2C%0Ah3%20%2Eocticon%2Dlink%2C%0Ah4%20%2Eocticon%2Dlink%2C%0Ah5%20%2Eocticon%2Dlink%2C%0Ah6%20%2Eocticon%2Dlink%20%7B%0A%20%20%20%20display%3A%20none%3B%0A%20%20%20%20color%3A%20%23000%3B%0A%20%20%20%20vertical%2Dalign%3A%20middle%3B%0A%7D%0Ah1%3Ahover%20%2Eanchor%2C%0Ah2%3Ahover%20%2Eanchor%2C%0Ah3%3Ahover%20%2Eanchor%2C%0Ah4%3Ahover%20%2Eanchor%2C%0Ah5%3Ahover%20%2Eanchor%2C%0Ah6%3Ahover%20%2Eanchor%20%7B%0A%20%20%20%20padding%2Dleft%3A%208px%3B%0A%20%20%20%20margin%2Dleft%3A%20%2D30px%3B%0A%20%20%20%20text%2Ddecoration%3A%20none%3B%0A%7D%0Ah1%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah2%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah3%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah4%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah5%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah6%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%20%7B%20display%3A%20inline%2Dblock%20%7D%0Ah1%20%7B%0A%20%20%20%20padding%2Dbottom%3A%200%2E3em%3B%0A%20%20%20%20font%2Dsize%3A%202%2E25em%3B%0A%20%20%20%20line%2Dheight%3A%201%2E2%3B%0A%20%20%20%20border%2Dbottom%3A%201px%20solid%20%23eee%3B%0A%7D%0Ah1%20%2Eanchor%20%7B%20line%2Dheight%3A%201%20%7D%0Ah2%20%7B%0A%20%20%20%20padding%2Dbottom%3A%200%2E3em%3B%0A%20%20%20%20font%2Dsize%3A%201%2E75em%3B%0A%20%20%20%20line%2Dheight%3A%201%2E225%3B%0A%20%20%20%20border%2Dbottom%3A%201px%20solid%20%23eee%3B%0A%7D%0Ah2%20%2Eanchor%20%7B%20line%2Dheight%3A%201%20%7D%0Ah3%20%7B%0A%20%20%20%20font%2Dsize%3A%201%2E5em%3B%0A%20%20%20%20line%2Dheight%3A%201%2E43%3B%0A%7D%0Ah3%20%2Eanchor%20%7B%20line%2Dheight%3A%201%2E2%20%7D%0Ah4%20%7B%20font%2Dsize%3A%201%2E25em%20%7D%0Ah4%20%2Eanchor%20%7B%20line%2Dheight%3A%201%2E2%20%7D%0Ah5%20%7B%20font%2Dsize%3A%201em%20%7D%0Ah5%20%2Eanchor%20%7B%20line%2Dheight%3A%201%2E1%20%7D%0Ah6%20%7B%0A%20%20%20%20font%2Dsize%3A%201em%3B%0A%20%20%20%20color%3A%20%23777%3B%0A%7D%0Ah6%20%2Eanchor%20%7B%20line%2Dheight%3A%201%2E1%20%7D%0Ap%2C%0Ablockquote%2C%0Aul%2C%0Aol%2C%0Adl%2C%0Atable%2C%0Apre%20%7B%0A%20%20%20%20margin%2Dtop%3A%200%3B%0A%20%20%20%20margin%2Dbottom%3A%2016px%3B%0A%7D%0Ahr%20%7B%0A%20%20%20%20height%3A%204px%3B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20margin%3A%2016px%200%3B%0A%20%20%20%20background%2Dcolor%3A%20%23e7e7e7%3B%0A%20%20%20%20border%3A%200%20none%3B%0A%7D%0Aul%2C%0Aol%20%7B%20padding%2Dleft%3A%202em%20%7D%0Aul%20ul%2C%0Aul%20ol%2C%0Aol%20ol%2C%0Aol%20ul%20%7B%0A%20%20%20%20margin%2Dtop%3A%200%3B%0A%20%20%20%20margin%2Dbottom%3A%200%3B%0A%7D%0Ali%3Ep%20%7B%20margin%2Dtop%3A%2016px%20%7D%0Adl%20%7B%20padding%3A%200%20%7D%0Adl%20dt%20%7B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20margin%2Dtop%3A%2016px%3B%0A%20%20%20%20font%2Dsize%3A%201em%3B%0A%20%20%20%20font%2Dstyle%3A%20italic%3B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%7D%0Adl%20dd%20%7B%0A%20%20%20%20padding%3A%200%2016px%3B%0A%20%20%20%20margin%2Dbottom%3A%2016px%3B%0A%7D%0Ablockquote%20%7B%0A%20%20%20%20padding%3A%200%2015px%3B%0A%20%20%20%20color%3A%20%23777%3B%0A%20%20%20%20border%2Dleft%3A%204px%20solid%20%23ddd%3B%0A%7D%0Ablockquote%3E%3Afirst%2Dchild%20%7B%20margin%2Dtop%3A%200%20%7D%0Ablockquote%3E%3Alast%2Dchild%20%7B%20margin%2Dbottom%3A%200%20%7D%0Atable%20%7B%0A%20%20%20%20display%3A%20block%3B%0A%20%20%20%20width%3A%20100%25%3B%0A%20%20%20%20overflow%3A%20auto%3B%0A%20%20%20%20word%2Dbreak%3A%20normal%3B%0A%20%20%20%20word%2Dbreak%3A%20keep%2Dall%3B%0A%7D%0Atable%20caption%20%7B%0A%20%20%20%20display%3A%20none%3B%0A%7D%0Atable%20th%20%7B%20font%2Dweight%3A%20bold%20%7D%0Atable%20th%2C%0Atable%20td%20%7B%0A%20%20%20%20padding%3A%206px%2013px%3B%0A%20%20%20%20border%3A%201px%20solid%20%23ddd%3B%0A%7D%0Atable%20tr%20%7B%0A%20%20%20%20background%2Dcolor%3A%20%23fff%3B%0A%20%20%20%20border%2Dtop%3A%201px%20solid%20%23ccc%3B%0A%7D%0Atable%20tr%3Anth%2Dchild%282n%29%20%7B%20background%2Dcolor%3A%20%23f8f8f8%20%7D%0Aimg%20%7B%0A%20%20%20%20max%2Dwidth%3A%20100%25%3B%0A%20%20%20%20box%2Dsizing%3A%20border%2Dbox%3B%0A%7D%0Acode%20%7B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20padding%2Dtop%3A%200%2E2em%3B%0A%20%20%20%20padding%2Dbottom%3A%200%2E2em%3B%0A%20%20%20%20margin%3A%200%3B%0A%20%20%20%20font%2Dsize%3A%2085%25%3B%0A%20%20%20%20background%2Dcolor%3A%20rgba%280%2C0%2C0%2C0%2E04%29%3B%0A%20%20%20%20border%2Dradius%3A%203px%3B%0A%7D%0Acode%3Abefore%2C%0Acode%3Aafter%20%7B%0A%20%20%20%20letter%2Dspacing%3A%20%2D0%2E2em%3B%0A%20%20%20%20content%3A%20%22%5C00a0%22%3B%0A%7D%0Apre%3Ecode%20%7B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20margin%3A%200%3B%0A%20%20%20%20font%2Dsize%3A%20100%25%3B%0A%20%20%20%20word%2Dbreak%3A%20normal%3B%0A%20%20%20%20white%2Dspace%3A%20pre%3B%0A%20%20%20%20background%3A%20transparent%3B%0A%20%20%20%20border%3A%200%3B%0A%7D%0A%2Ehighlight%20%7B%20margin%2Dbottom%3A%2016px%20%7D%0A%2Ehighlight%20pre%2C%0Apre%20%7B%0A%20%20%20%20padding%3A%2016px%3B%0A%20%20%20%20overflow%3A%20auto%3B%0A%20%20%20%20font%2Dsize%3A%2085%25%3B%0A%20%20%20%20line%2Dheight%3A%201%2E45%3B%0A%20%20%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%20%20%20%20border%2Dradius%3A%203px%3B%0A%7D%0A%2Ehighlight%20pre%20%7B%0A%20%20%20%20margin%2Dbottom%3A%200%3B%0A%20%20%20%20word%2Dbreak%3A%20normal%3B%0A%7D%0Apre%20%7B%20word%2Dwrap%3A%20normal%20%7D%0Apre%20code%20%7B%0A%20%20%20%20display%3A%20inline%3B%0A%20%20%20%20max%2Dwidth%3A%20initial%3B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20margin%3A%200%3B%0A%20%20%20%20overflow%3A%20initial%3B%0A%20%20%20%20line%2Dheight%3A%20inherit%3B%0A%20%20%20%20word%2Dwrap%3A%20normal%3B%0A%20%20%20%20background%2Dcolor%3A%20transparent%3B%0A%20%20%20%20border%3A%200%3B%0A%7D%0Apre%20code%3Abefore%2C%0Apre%20code%3Aafter%20%7B%20content%3A%20normal%20%7D%0Akbd%20%7B%0A%20%20%20%20display%3A%20inline%2Dblock%3B%0A%20%20%20%20padding%3A%203px%205px%3B%0A%20%20%20%20font%2Dsize%3A%2011px%3B%0A%20%20%20%20line%2Dheight%3A%2010px%3B%0A%20%20%20%20color%3A%20%23555%3B%0A%20%20%20%20vertical%2Dalign%3A%20middle%3B%0A%20%20%20%20background%2Dcolor%3A%20%23fcfcfc%3B%0A%20%20%20%20border%3A%20solid%201px%20%23ccc%3B%0A%20%20%20%20border%2Dbottom%2Dcolor%3A%20%23bbb%3B%0A%20%20%20%20border%2Dradius%3A%203px%3B%0A%20%20%20%20box%2Dshadow%3A%20inset%200%20%2D1px%200%20%23bbb%3B%0A%7D%0A" rel="stylesheet">
</head>
<body>
<header>
<h1 class="title">Pukcab 1.5</h1>
<h3 class="date">2015-10-22</h3>
</header>
<nav id="TOC">
<ul>
<li><a href="#introduction">Introduction</a><ul>
<li><a href="#intended-use">Intended use</a></li>
<li><a href="#features">Features</a></li>
</ul></li>
<li><a href="#requirements">Requirements</a><ul>
<li><a href="#backup-server">Backup server</a></li>
<li><a href="#clients">Clients</a></li>
</ul></li>
<li><a href="#installation">Installation</a><ul>
<li><a href="#on-the-backup-server">On the backup server</a></li>
<li><a href="#on-the-clients-manual">On the clients (manual)</a></li>
<li><a href="#on-the-clients-password-registration">On the clients (password registration)</a></li>
</ul></li>
<li><a href="#configuration">Configuration</a><ul>
<li><a href="#server">Server</a></li>
<li><a href="#client">Client</a></li>
</ul></li>
<li><a href="#usage">Usage</a><ul>
<li><a href="#synopsis">Synopsis</a></li>
<li><a href="#backup"><code>backup</code></a></li>
<li><a href="#config"><code>config</code></a></li>
<li><a href="#continue"><code>continue</code></a></li>
<li><a href="#delete"><code>delete</code></a></li>
<li><a href="#expire"><code>expire</code></a></li>
<li><a href="#history"><code>history</code></a></li>
<li><a href="#info"><code>info</code></a></li>
<li><a href="#ping"><code>ping</code></a></li>
<li><a href="#register"><code>register</code></a></li>
<li><a href="#restore"><code>restore</code></a></li>
<li><a href="#vacuum"><code>vacuum</code></a></li>
<li><a href="#verify"><code>verify</code></a></li>
<li><a href="#web"><code>web</code></a></li>
</ul></li>
<li><a href="#options">Options</a><ul>
<li><a href="#general-options">General options</a></li>
<li><a href="#date"><code>date</code></a></li>
<li><a href="#directory"><code>directory</code></a></li>
<li><a href="#full"><code>full</code></a></li>
<li><a href="#in-place"><code>in-place</code></a></li>
<li><a href="#keep"><code>keep</code></a></li>
<li><a href="#listen"><code>listen</code></a></li>
<li><a href="#name"><code>name</code></a></li>
<li><a href="#schedule"><code>schedule</code></a></li>
<li><a href="#short"><code>short</code></a></li>
<li><a href="#files">Files</a></li>
</ul></li>
<li><a href="#examples-2">Examples</a></li>
<li><a href="#frequently-asked-questions">Frequently Asked Questions</a><ul>
<li><a href="#client-faq">Client FAQ</a></li>
<li><a href="#server-faq">Server FAQ</a></li>
</ul></li>
<li><a href="#internals">Internals</a><ul>
<li><a href="#logging">Logging</a></li>
</ul></li>
</ul>
</nav>
<h1 id="introduction">Introduction</h1>
<p><code>pukcab</code> is a lightweight, single-binary backup system for UNIX / Linux systems that stores de-duplicated, compressed and incremental backups on a remote server using just an SSH connection.</p>
<p>De-duplication happens not only between incremental backups of the same system but also between different systems. For example, it allows you to perform full backups of systems running the same OS with only minimal disk space for each additional system<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>.</p>
<h2 id="intended-use">Intended use</h2>
<p><code>pukcab</code> doesn’t compare to professional-grade backup systems, <em>don’t expect it to be able to backup thousands of systems or dozens of terabytes of data</em>.</p>
<p>It is, however, perfectly suitable for home users, hobbyists, UNIX / Linux enthusiasts or small tech-savy shops who want a flexible, yet dead-easy to setup and operate backup system with no bigger expenses than just a Linux box with a few terabytes of storage.</p>
<p>Little to no configuration should ever be required to satisfy most needs:</p>
<ul>
<li>just run <code>pukcab backup</code> every night on your systems</li>
<li>full-system backups should be preferred, thanks to sensible OS-dependent default exclusions</li>
<li>automatic daily/weekly/monthly/yearly retention policies should keep enough backups around</li>
</ul>
<h2 id="features">Features</h2>
<ul>
<li>lightweight (just 1 binary to be installed on both the client and the server)</li>
<li>easy to install (only 1 username with SSH connectivity is required to set up a server)</li>
<li>flexible configuration</li>
<li>sensible defaults</li>
<li>automatic retention schedules</li>
<li>incremental/full backups</li>
<li>data de-duplication</li>
<li>data compression</li>
<li>(optional) web interface</li>
</ul>
<h1 id="requirements">Requirements</h1>
<p><code>pukcab</code> was written with UNIX-like operating systems in mind, it is therefore currently unsupported on Microsoft Windows<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>.</p>
<p><code>pukcab</code> has been tested on the following operating systems and platforms<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>:</p>
<ul>
<li>Linux 4.<em>x</em> on 64-bit Intel or AMD processors</li>
<li>Linux 4.<em>x</em> on 32-bit Intel or AMD processors<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a></li>
<li>Linux 3.<em>x</em> on 32-bit ARM processors</li>
<li>Mac OS X on 64-bit Intel processors</li>
</ul>
<h2 id="backup-server">Backup server</h2>
<p>To run a <code>pukcab</code> backup server, you will need:</p>
<ul>
<li>SSH server</li>
<li>dedicated user (recommended)</li>
<li>disk space</li>
<li>scalable filesystem</li>
<li>enough memory or swap space (running without swap space is <em>not</em> recommended)</li>
</ul>
<p>The “scalable filesystem” requirement might seem surprising but, to store backups, you will need a modern filesystem that can gracefully handle thousands and thousands of files per directory, sometimes big, sometimes small.</p>
<p>On Linux, <a href="https://en.wikipedia.org/wiki/XFS">XFS</a>, <a href="https://en.wikipedia.org/wiki/Ext4">ext4</a> and <a href="https://en.wikipedia.org/wiki/Btrfs">Btrfs</a> are known to work. FAT, NTFS or HFS cannot and must not be used.</p>
<h2 id="clients">Clients</h2>
<p>The requirements for a client are very limited. In short, nearly any Linux/OS X box will do.</p>
<ul>
<li>SSH client</li>
<li>functional <code>tar</code> command (tested with <a href="http://www.gnu.org/software/tar/">GNU tar</a>, should work with <a href="http://www.libarchive.org/">BSD (libarchive) tar</a> and <a href="http://sourceforge.net/projects/s-tar/">Jörg Schilling’s star</a>). Caution: the <code>tar</code> command of <a href="http://www.busybox.net/">BusyBox</a> is known to have issues that will prevent it from restoring files.</li>
<li><code>root</code> access (if you want to backup files other than yours)</li>
</ul>
<h1 id="installation">Installation</h1>
<p>Just copy the <code>pukcab</code> binary<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a> into your path (<code>/usr/bin/pukcab</code> will be just fine) on the backup server and each client.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">OS</th>
<th style="text-align: center;">Platform</th>
<th style="text-align: center;">Width</th>
<th style="text-align: left;">Packages</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Linux</td>
<td style="text-align: center;">x86-64</td>
<td style="text-align: center;">64-bit</td>
<td style="text-align: left;"><a href="http://ezix.org/download/?package=x86-64.linux.pukcab.ezix.org">ZIP</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">Linux</td>
<td style="text-align: center;">i686</td>
<td style="text-align: center;">32-bit</td>
<td style="text-align: left;"><a href="http://ezix.org/download/?package=i686.linux.pukcab.ezix.org">ZIP</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Linux</td>
<td style="text-align: center;">ARM</td>
<td style="text-align: center;">32-bit</td>
<td style="text-align: left;"><a href="http://ezix.org/download/?package=arm.linux.pukcab.ezix.org">ZIP</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">Mac OS X</td>
<td style="text-align: center;">x86-64</td>
<td style="text-align: center;">64-bit</td>
<td style="text-align: left;"><a href="http://ezix.org/download/?package=osx.pukcab.ezix.org">ZIP</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>any</em></td>
<td style="text-align: center;"><em>any</em></td>
<td style="text-align: center;"><em>any</em></td>
<td style="text-align: left;"><a href="http://ezix.org/download/?package=pukcab.ezix.org">Source</a><a href="#fn6" class="footnoteRef" id="fnref6"><sup>6</sup></a></td>
</tr>
</tbody>
</table>
<p>For RPM-based Linux distributions, YUM repositories are available:</p>
<ul>
<li><a href="http://ezix.org/software/pukcab.repo">stable</a></li>
<li><a href="http://ezix.org/software/pukcab-beta.repo">beta</a></li>
</ul>
<p>Copy the <code>.repo</code> file into <code>/etc/yum.repos.d</code> and do either:</p>
<ul>
<li><code>sudo yum install pukcab-server</code></li>
<li><code>sudo yum install pukcab-client</code></li>
</ul>
<h2 id="on-the-backup-server">On the backup server</h2>
<ol type="1">
<li>create a dedicated user, if necessary (usually called <code>pukcab</code>) – this user does not need specific privileges (i.e. do <em>NOT</em> use <code>root</code>)</li>
<li>allow key-based SSH login for that user</li>
<li><em>optional</em>: allow password-based SSH login and set a password for the dedicated user (if you want to be able to register new clients using that password)</li>
</ol>
<h2 id="on-the-clients-manual">On the clients (manual)</h2>
<ol type="1">
<li><a href="https://en.wikipedia.org/wiki/Ssh-keygen">create SSH keys</a> for the user which will launch the backup (most probably <code>root</code>)</li>
<li>add the user’s public key to the dedicated user’s <code>authorized_keys</code> on the backup server</li>
</ol>
<h2 id="on-the-clients-password-registration">On the clients (password registration)</h2>
<ol type="1">
<li><a href="https://en.wikipedia.org/wiki/Ssh-keygen">create SSH keys</a> for the user which will launch the backup (most probably <code>root</code>)</li>
<li><a href="#register">register</a> to the backup server</li>
</ol>
<h1 id="configuration">Configuration</h1>
<p><code>pukcab</code> is configured with a simple <a href="https://en.wikipedia.org/wiki/INI_file">INI-like text file</a>:</p>
<pre><code>; comment
name1 = number
name2 = &quot;text value&quot;
name3 = [ &quot;list&quot;, &quot;of&quot;, &quot;text&quot;, &quot;values&quot; ]
[section1]
name4 = &quot;text value&quot;
name5 = number
[section2]
name6 = &quot;text value&quot;
...</code></pre>
<p>The default is to read <code>/etc/pukcab.conf</code> then <code>~/.pukcabrc</code> (which means that this user-defined file can override values set in the global configuration file).</p>
<p>Both client and server use the same configuration file format and location, only the values determine the client or server role (a client will have a <code>server</code> parameter set).</p>
<h3 id="notes">Notes</h3>
<ul>
<li>text values must be enclosed in <code>&quot;</code></li>
<li>lists of values are enclosed in <code>[</code> and <code>]</code> with comma-separated items</li>
</ul>
<h2 id="server">Server</h2>
<p>The <code>pukcab</code> server contains the data files for all clients (in the <code>vault</code>) and a database of all backup sets (the <code>catalog</code>).</p>
<table>
<caption>server configuration</caption>
<thead>
<tr class="header">
<th style="text-align: left;">parameter/section</th>
<th style="text-align: center;">type</th>
<th style="text-align: center;">default</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>user</code></td>
<td style="text-align: center;">text</td>
<td style="text-align: center;"><em>none</em></td>
<td style="text-align: left;">user name <code>pukcab</code> will run under (<em>mandatory</em>)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>vault</code></td>
<td style="text-align: center;">text</td>
<td style="text-align: center;"><code>&quot;vault&quot;</code></td>
<td style="text-align: left;">folder where all archive files will be created</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>catalog</code></td>
<td style="text-align: center;">text</td>
<td style="text-align: center;"><code>&quot;catalog.db&quot;</code></td>
<td style="text-align: left;">name of the catalog database</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>maxtries</code></td>
<td style="text-align: center;">number</td>
<td style="text-align: center;"><code>10</code></td>
<td style="text-align: left;">number of retries in case of concurrent client accesses</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>web</code></td>
<td style="text-align: center;">text</td>
<td style="text-align: center;"><em>none</em></td>
<td style="text-align: left;">auto-start the web interface on [<em>host</em>]:<em>port</em> (cf. <a href="#listen">listen</a>)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>[expiration]</code></td>
<td style="text-align: center;">section</td>
<td style="text-align: center;"></td>
<td style="text-align: left;">specify expiration of standard schedules</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>daily</code></td>
<td style="text-align: center;">number</td>
<td style="text-align: center;"><code>14</code></td>
<td style="text-align: left;">retention (in days) of <code>daily</code> backups</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>weekly</code></td>
<td style="text-align: center;">number</td>
<td style="text-align: center;"><code>42</code></td>
<td style="text-align: left;">retention (in days) of <code>weekly</code> backups</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>monthly</code></td>
<td style="text-align: center;">number</td>
<td style="text-align: center;"><code>365</code></td>
<td style="text-align: left;">retention (in days) of <code>monthly</code> backups</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>yearly</code></td>
<td style="text-align: center;">number</td>
<td style="text-align: center;"><code>3650</code></td>
<td style="text-align: left;">retention (in days) of <code>yearly</code> backups</td>
</tr>
</tbody>
</table>
<h3 id="notes-1">Notes</h3>
<ul>
<li><code>vault</code> and <code>catalog</code> paths can be absolute (starting with <code>/</code>) or relative to <code>user</code>’s home directory.</li>
<li>the <code>vault</code> folder must be able to store many gigabytes of data, spread over thousands of files</li>
<li>the <code>catalog</code> database may become big and must be located in a folder where <code>user</code> has write access</li>
<li>the <code>vault</code> folder <strong>must not be used to store anything</strong><a href="#fn7" class="footnoteRef" id="fnref7"><sup>7</sup></a> else than <code>pukcab</code>’s data files; in particular, do <strong>NOT</strong> store the <code>catalog</code> there</li>
</ul>
<h3 id="example">Example</h3>
<pre><code>; all backups will be received and stored by the 'backup' user
user=&quot;backup&quot;
vault=&quot;/var/local/backup/vault&quot;
catalog=&quot;/var/local/backup/catalog.db&quot;
; keep daily backups longer (4 weeks instead of 2)
[expiration]
daily=28</code></pre>
<h3 id="scheduling-expiration">Scheduling expiration</h3>
<p>This task should be run <em>every day</em>, preferably when the system is idle (or at least, not receiving backups from clients).</p>
<p>Use <a href="https://en.wikipedia.org/wiki/Cron"><code>cron</code></a> to schedule <code>pukcab expire</code> to run daily.</p>
<p>On many systems (most Linux distributions), you can also create a script in <code>/etc/cron.daily/pukcab-expire</code> with the following content:</p>
<pre><code>#!/bin/sh

exec pukcab expire</code></pre>
<h2 id="client">Client</h2>
<p>The client configuration mainly focuses on what to include in the backup and what to exclude from it.</p>
<table>
<caption>client configuration</caption>
<thead>
<tr class="header">
<th style="text-align: left;">parameter</th>
<th style="text-align: center;">type</th>
<th style="text-align: center;">default</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>user</code></td>
<td style="text-align: center;">text</td>
<td style="text-align: center;"><em>none</em></td>
<td style="text-align: left;">user name to use to connect (<em>mandatory</em>)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>server</code></td>
<td style="text-align: center;">text</td>
<td style="text-align: center;"><em>none</em></td>
<td style="text-align: left;">backup server (<em>mandatory</em>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>port</code></td>
<td style="text-align: center;">number</td>
<td style="text-align: center;"><code>22</code></td>
<td style="text-align: left;">TCP port to use on the backup server</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>command</code></td>
<td style="text-align: center;">text</td>
<td style="text-align: center;"><code>&quot;pukcab&quot;</code></td>
<td style="text-align: left;">command to use on the backup server</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>include</code></td>
<td style="text-align: center;">list</td>
<td style="text-align: center;"><a href="#os-dependent-defaults">OS-dependent</a></td>
<td style="text-align: left;">what to include in the backup</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>exclude</code></td>
<td style="text-align: center;">list</td>
<td style="text-align: center;"><a href="#os-dependent-defaults">OS-dependent</a></td>
<td style="text-align: left;">what to exclude from the backup</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>tar</code></td>
<td style="text-align: center;">text</td>
<td style="text-align: center;"><code>&quot;tar&quot;</code></td>
<td style="text-align: left;">tar command to use to <a href="#restore">restore</a> files</td>
</tr>
</tbody>
</table>
<h3 id="including-excluding-items"><code>includ</code>ing / <code>exclud</code>ing items</h3>
<p>When taking a backup, <code>pukcab</code> goes through several steps to determine what should be backed up</p>
<ol type="1">
<li>get all mounted filesystems</li>
<li>include everything that is listed in <code>include</code></li>
<li>exclude everything that is listed in <code>exclude</code></li>
</ol>
<p>To select stuff to be included or excluded, you can use the following formats:</p>
<table>
<caption><code>include</code>/<code>exclude</code> filters</caption>
<thead>
<tr class="header">
<th style="text-align: left;">format</th>
<th style="text-align: left;">matches</th>
<th style="text-align: left;">examples</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>type</em></td>
<td style="text-align: left;">mounted filesystems of that type</td>
<td style="text-align: left;"><code>&quot;ext4&quot;</code>, <code>&quot;btrfs&quot;</code>, <code>&quot;procfs&quot;</code>, <code>&quot;tmpfs&quot;</code>, <code>&quot;hfs&quot;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>/</code><em>path</em></td>
<td style="text-align: left;"><em>path</em> and anything under it</td>
<td style="text-align: left;"><code>&quot;/usr/tmp&quot;</code>, <code>&quot;/var/tmp&quot;</code>, <code>&quot;/tmp&quot;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>pattern</em></td>
<td style="text-align: left;">files matching <em>pattern</em><a href="#fn8" class="footnoteRef" id="fnref8"><sup>8</sup></a></td>
<td style="text-align: left;"><code>&quot;.*.swp&quot;</code>, <code>&quot;*.part&quot;</code>, <code>&quot;*.tmp&quot;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>./</code><em>name</em></td>
<td style="text-align: left;">directories containing something named <em>name</em></td>
<td style="text-align: left;"><code>&quot;./.nobackup&quot;</code></td>
</tr>
</tbody>
</table>
<h3 id="example-1">Example</h3>
<pre><code>user=&quot;backup&quot;
server=&quot;backupserver.localdomain.net&quot;</code></pre>
<h3 id="scheduling-backups">Scheduling backups</h3>
<p>Use <a href="https://en.wikipedia.org/wiki/Cron"><code>cron</code></a> to schedule <code>pukcab backup</code> to run whenever you want to take backups.</p>
<p>For daily backups, you can often just create a script in <code>/etc/cron.daily/pukcab</code> with the following content:</p>
<pre><code>#!/bin/sh

exec pukcab backup</code></pre>
<h3 id="os-dependent-defaults">OS-dependent defaults</h3>
<p><code>pukcab</code> tries to apply “sane” defaults, especially when taking a backup. In particular, it will only attempt to backup “real” filesystems and skip temporary files or pseudo-filesystems.</p>
<p>Under Linux, there are many exclusions caused by the extensive use of pseudo-filesystems.</p>
<table>
<caption>Linux defaults</caption>
<thead>
<tr class="header">
<th style="text-align: left;">parameter</th>
<th style="text-align: left;">default value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>include</code></td>
<td style="text-align: left;"><code>[ &quot;ext2&quot;, &quot;ext3&quot;, &quot;ext4&quot;, &quot;btrfs&quot;, &quot;xfs&quot;, &quot;jfs&quot;, &quot;vfat&quot; ]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>exclude</code></td>
<td style="text-align: left;"><code>[ &quot;/proc&quot;, &quot;/sys&quot;, &quot;/selinux&quot;, &quot;tmpfs&quot;, &quot;./.nobackup&quot; ]</code></td>
</tr>
</tbody>
</table>
<p>For Mac OS X, the list of included filesystems is much shorter (it currently includes just the default filesystem, HFS).</p>
<table>
<caption>Mac OS X defaults</caption>
<thead>
<tr class="header">
<th style="text-align: left;">parameter</th>
<th style="text-align: left;">default value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>include</code></td>
<td style="text-align: left;"><code>[ &quot;hfs&quot; ]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>exclude</code></td>
<td style="text-align: left;"><code>[ &quot;devfs&quot;, &quot;autofs&quot;, &quot;afpfs&quot;, &quot;./.nobackup&quot; ]</code></td>
</tr>
</tbody>
</table>
<h1 id="usage">Usage</h1>
<h2 id="synopsis">Synopsis</h2>
<p><code>pukcab</code> <em>command</em> [ <a href="#options"><em>options</em></a> … ] [ <a href="#files"><em>files</em></a> … ]</p>
<table>
<caption>available commands</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="#backup">backup</a>, <a href="#backup">save</a></td>
<td style="text-align: left;">take a new backup</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#config">config</a>, <a href="#config">cfg</a></td>
<td style="text-align: left;">display <code>pukcab</code>’s configuration</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#continue">continue</a>, <a href="#continue">resume</a></td>
<td style="text-align: left;">continue a partial backup</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#delete">delete</a>, <a href="#delete">purge</a></td>
<td style="text-align: left;">delete a backup</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#expire">expire</a></td>
<td style="text-align: left;">apply retention schedule to old backups</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#history">history</a>, <a href="#history">versions</a></td>
<td style="text-align: left;">list history for files</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#info">info</a>, <a href="#info">list</a></td>
<td style="text-align: left;">list backups and files</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#ping">ping</a>, <a href="#ping">test</a></td>
<td style="text-align: left;">check server connectivity</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#register">register</a></td>
<td style="text-align: left;">register to backup server</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#restore">restore</a></td>
<td style="text-align: left;">restore files</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#vacuum">vacuum</a></td>
<td style="text-align: left;">vault and catalog clean-up</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#verify">verify</a>, <a href="#verify">check</a></td>
<td style="text-align: left;">verify files in a backup</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#web">web</a></td>
<td style="text-align: left;">starts the built-in web interface</td>
</tr>
</tbody>
</table>
<h2 id="backup"><code>backup</code></h2>
<p>The <code>backup</code> command launches a new backup:</p>
<ul>
<li>creates a new backup set (and the corresponding date/id) on the <a href="#server">backup server</a></li>
<li>builds the list of files to be backed-up, based on the <code>include</code>/<code>exclude</code> configuration directives</li>
<li>sends that list to the backup server</li>
<li>computes the list of changes since the last backup (if <code>--full</code> isn’t specified)</li>
<li>sends the files to be includes in the backup</li>
<li>closes the backup</li>
</ul>
<dl>
<dt>Syntax</dt>
<dd><p><code>pukcab backup</code> [ –<a href="#full">full</a> ] [ –<a href="#name">name</a>=<em>name</em> ] [ –<a href="#schedule">schedule</a>=<em>schedule</em> ]</p>
</dd>
</dl>
<h3 id="notes-2">Notes</h3>
<ul>
<li>the <a href="#name">name</a> and <a href="#schedule">schedule</a> options are chosen automatically if not specified</li>
<li>interrupted backups can be resumed with the <a href="#continue">continue</a> command</li>
<li>unless forced, the command will fail if another backup for the same name is already running</li>
</ul>
<h2 id="config"><code>config</code></h2>
<p>The <code>config</code> command displays the current configuration.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>pukcab config</code></p>
</dd>
</dl>
<h2 id="continue"><code>continue</code></h2>
<p>The <code>continue</code> command continues a previously interrupted backup.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>pukcab continue</code> [ –<a href="#name">name</a>=<em>name</em> ] [ –<a href="#date">date</a>=<em>date</em> ]</p>
</dd>
</dl>
<h3 id="notes-3">Notes</h3>
<ul>
<li>the <a href="#name">name</a> option is chosen automatically if not specified</li>
<li>the <a href="#date">date</a> option automatically selects the last unfinished backup</li>
<li>only unfinished backups may be resumed</li>
</ul>
<h2 id="delete"><code>delete</code></h2>
<p>The <code>delete</code> command discards the backup taken at a given <a href="#date">date</a>.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>pukcab delete</code> [ –<a href="#name">name</a>=<em>name</em> ] –<a href="#date">date</a>=<em>date</em></p>
</dd>
</dl>
<h3 id="notes-4">Notes</h3>
<ul>
<li>the <a href="#name">name</a> option is chosen automatically if not specified</li>
<li>the <a href="#date">date</a> must be specified</li>
</ul>
<h2 id="expire"><code>expire</code></h2>
<p>The <code>expire</code> command discards backups following a given <a href="#schedule">schedule</a> which are older than a given <a href="#date">age (or date)</a>.</p>
<p>Standard retention schedules have pre-defined retention periods:</p>
<table>
<caption>default retention schedules</caption>
<thead>
<tr class="header">
<th style="text-align: left;">schedule</th>
<th style="text-align: left;">retention period</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>daily</code></td>
<td style="text-align: left;">2 weeks</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>weekly</code></td>
<td style="text-align: left;">6 weeks</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>monthly</code></td>
<td style="text-align: left;">365 days</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>yearly</code></td>
<td style="text-align: left;">10 years</td>
</tr>
</tbody>
</table>
<dl>
<dt>Syntax</dt>
<dd><p><code>pukcab expire</code> [ –<a href="#name">name</a>=<em>name</em> ] [ –<a href="#schedule">schedule</a>=<em>schedule</em> ] [ –<a href="#date">age</a>=<em>age</em> ] [ –<a href="#keep">keep</a>=<em>keep</em> ]</p>
</dd>
</dl>
<h3 id="notes-5">Notes</h3>
<ul>
<li>on the <a href="#server">backup server</a>, the <a href="#name">name</a> option defaults to all backups if not specified</li>
<li>on a <a href="#client">backup client</a>, the <a href="#name">name</a> option is chosen automatically if not specified</li>
<li>the <a href="#schedule">schedule</a> and <a href="#date">expiration</a> are chosen automatically if not specified</li>
<li><a href="#schedule">schedule</a> can be a comma-separated list of schedules, in which case any explicit <a href="#date">expiration</a> will be applied to <em>all</em></li>
</ul>
<h2 id="history"><code>history</code></h2>
<p>The <code>history</code> command shows the different versions stored in backups for given files. Backup sets can be filtered by name and/or date and files.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>pukcab history</code> [ –<a href="#name">name</a>=<em>name</em> ] [ –<a href="#date">date</a>=<em>date</em> ] [ <a href="#files"><em>FILES</em></a> … ]</p>
</dd>
</dl>
<h3 id="notes-6">Notes</h3>
<ul>
<li>if <a href="#date">date</a> is specified, the command lists only history after that date</li>
<li>on server, if <a href="#name">name</a> is not specified, the command lists all backups, regardless of their name</li>
</ul>
<h2 id="info"><code>info</code></h2>
<p>The <code>info</code> command lists the backup sets stored on the server. Backup sets can be filtered by name and/or date and files.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>pukcab info</code> [ –<a href="#short">short</a> ] [ –<a href="#name">name</a>=<em>name</em> ] [ –<a href="#date">date</a>=<em>date</em> ] [ <a href="#files"><em>FILES</em></a> … ]</p>
</dd>
</dl>
<h3 id="notes-7">Notes</h3>
<ul>
<li>if <a href="#date">date</a> is specified, the command lists only details about the corresponding backup</li>
<li>on server, if <a href="#name">name</a> is not specified, the command lists all backups, regardless of their name</li>
<li>verbose mode lists the individual <a href="#files">files</a></li>
</ul>
<h2 id="ping"><code>ping</code></h2>
<p>The <code>ping</code> command allows to check connectivity to the server.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>pukcab ping</code></p>
</dd>
</dl>
<h3 id="notes-8">Notes</h3>
<ul>
<li>verbose mode displays detailed information during the check</li>
</ul>
<h2 id="register"><code>register</code></h2>
<p>The <code>register</code> command registers a client’s SSH public key to the server.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>pukcab register</code></p>
</dd>
</dl>
<h3 id="notes-9">Notes</h3>
<ul>
<li>to register to the backup server, <code>pukcab</code> will ask for the dedicated user’s password (set on the server)</li>
<li>verbose mode displays detailed information during the registration</li>
</ul>
<h2 id="restore"><code>restore</code></h2>
<p>The <code>restore</code> command restores <a href="#files">files</a> as they were at a given <a href="#date">date</a>.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>pukcab restore</code> [ –<a href="#in-place">in-place</a> ] [ –<a href="#directory">directory</a>=<em>directory</em> ] [ –<a href="#name">name</a>=<em>name</em> ] [ –<a href="#date">date</a>=<em>date</em> ] [ <a href="#files"><em>FILES</em></a> … ]</p>
</dd>
</dl>
<h3 id="notes-10">Notes</h3>
<ul>
<li>the <a href="#name">name</a> option is chosen automatically if not specified</li>
<li>the <a href="#date">date</a> option automatically selects the last backup</li>
<li>this operation currently requires a working <code>tar</code> system command (usually GNU tar)</li>
<li><code>--in-place</code> is equivalent to <code>--directory=/</code></li>
</ul>
<h2 id="vacuum"><code>vacuum</code></h2>
<p>The <code>vacuum</code> command initiates clean-up of the catalog and vault to save disk space.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>pukcab vacuum</code></p>
</dd>
</dl>
<h3 id="notes-11">Notes</h3>
<ul>
<li>can only be run on the server</li>
<li>the clean-up may take a while and delay new backups</li>
</ul>
<h2 id="verify"><code>verify</code></h2>
<p>The verify command reports <a href="#files">files</a> which have changed since a given <a href="#date">date</a>.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>pukcab verify</code> [ –<a href="#name">name</a>=<em>name</em> ] [ –<a href="#date">date</a>=<em>date</em> ] [ <a href="#files"><em>FILES</em></a> … ]</p>
</dd>
</dl>
<h3 id="notes-12">Notes</h3>
<ul>
<li>the <a href="#name">name</a> option is chosen automatically if not specified</li>
<li>the <a href="#date">date</a> option automatically selects the last backup if not specified</li>
</ul>
<h2 id="web"><code>web</code></h2>
<p>The <code>web</code> command starts the built-in web interface.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>pukcab web</code> [ –<a href="#listen">listen</a>=[<em>host</em>]:<em>port</em> ]</p>
</dd>
</dl>
<h3 id="notes-13">Notes</h3>
<ul>
<li>by default, <code>pukcab</code> listens on <code>localhost</code> on port 8080</li>
<li>available features depend on the local system’s role (client or server)</li>
</ul>
<h1 id="options">Options</h1>
<p><code>pukcab</code> is quite flexible with the way options are provided:</p>
<ul>
<li>options can be provided in any order</li>
<li>options have both a long and a short (1-letter) name (for example, <code>--name</code> is <code>-n</code>)</li>
<li>options can be prefixed with 1 or 2 minus signs (<code>--option</code> and <code>-option</code> are equivalent)</li>
<li><code>--option=value</code> and <code>--option value</code> are equivalent (caution: <code>=</code> is mandatory for boolean options)</li>
</ul>
<p>This means that the following lines are all equivalent:</p>
<pre><code>pukcab info -n test
pukcab info -n=test
pukcab info --n test
pukcab info --n=test
pukcab info -name test
pukcab info -name=test
pukcab info --name test
pukcab info --name=test</code></pre>
<h2 id="general-options">General options</h2>
<p>The following options apply to all commands:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">option</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>-c</code>, <code>--config</code>[<code>=</code>]<em>file</em></td>
<td style="text-align: center;">specify a <a href="#configuration">configuration file</a> to use</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>-F</code>, <code>--force</code>[<code>=true</code>]</td>
<td style="text-align: center;">ignore non-fatal errors and force action</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>-v</code>, <code>--verbose</code>[<code>=true</code>]</td>
<td style="text-align: center;">display more detailed information</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>-h</code>, <code>--help</code></td>
<td style="text-align: center;">display online help</td>
</tr>
</tbody>
</table>
<h2 id="date"><code>date</code></h2>
<p>Dates are an important concept for <code>pukcab</code>.</p>
<p>All backup sets are identified by a unique numeric id and correspond to a set of files at a given point in time (the backup id is actually a <a href="https://en.wikipedia.org/wiki/Unix_time">UNIX timestamp</a>). The numeric id can be used to unambiguously specify a given backup set but other, more user-friendly formats are available:</p>
<ul>
<li>a duration in days (default when no unit is specified), hours, minutes is interpreted as relative (in the past, regardless of the actual sign of the duration you specify) to the current time</li>
<li>a human-readable date specification in YYYY-MM-DD format is interpreted as absolute (00:00:00 on that date)</li>
<li><code>now</code> or <code>latest</code> are interpreted as the current time</li>
<li><code>today</code> is interpreted as the beginning of the day (local time)</li>
</ul>
<dl>
<dt>Syntax</dt>
<dd><p><code>--date</code>[=]<em>date</em></p>
</dd>
<dd><p><code>-d</code> <em>date</em></p>
</dd>
</dl>
<h3 id="examples">Examples</h3>
<ul>
<li><code>--date 1422577319</code> means <em>on the 30th January 2015 at 01:21:59 CET</em></li>
<li><code>--date 0</code>, <code>--date now</code> and <code>--date latest</code> mean <em>now</em></li>
<li><code>--date today</code> means <em>today at 00:00</em></li>
<li><code>--date 1</code> means <em>yesterday same time</em></li>
<li><code>--date 7</code> means <em>last week</em></li>
<li><code>--date -48h</code> and <code>--date 48h</code> both mean <em>2 days ago</em></li>
<li><code>--date 2h30m</code> means <em>2 hours and 30 minutes ago</em></li>
<li><code>--date 2015-01-07</code> means <em>on the 7th January 2015 at midnight</em></li>
</ul>
<h2 id="directory"><code>directory</code></h2>
<p>Change to a given directory before restoring entries from the backup.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>--directory</code>[=]<em>directory</em></p>
</dd>
<dd><p><code>-C</code> <em>directory</em></p>
</dd>
<dt>Default value</dt>
<dd><p><em>none</em> (i.e. extract to the current directory)</p>
</dd>
</dl>
<h2 id="full"><code>full</code></h2>
<p>Forces a full backup: <code>pukcab</code> will send all files to the server, without checking for changes.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>--full</code>[<code>=true</code>]</p>
</dd>
<dd><p><code>--full=false</code></p>
</dd>
<dd><p><code>-f</code></p>
</dd>
<dt>Default value</dt>
<dd><p><code>false</code></p>
</dd>
</dl>
<h2 id="in-place"><code>in-place</code></h2>
<p>Change to the root of the filesystem (<code>/</code>) before restoring entries from the backup. This has the effect of restoring the files in-place, overwriting current files.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>--in-place</code>[<code>=true</code>]</p>
</dd>
<dd><p><code>--in-place=false</code></p>
</dd>
<dd><p><code>--inplace</code>[<code>=true</code>]</p>
</dd>
<dd><p><code>--inplace=false</code></p>
</dd>
<dt>Default value</dt>
<dd><p><code>false</code> (i.e. extract to the current directory)</p>
</dd>
</dl>
<h2 id="keep"><code>keep</code></h2>
<p>When expiring data, keep at least a certain number of backups (even if they are expired).</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>--keep</code>[=]<em>number</em></p>
</dd>
<dd><p><code>-k</code> <em>number</em></p>
</dd>
<dt>Default value</dt>
<dd><p><code>3</code></p>
</dd>
</dl>
<h2 id="listen"><code>listen</code></h2>
<p>Force the built-in web server to listen for connections on a different address/port.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>--listen</code>[=][<em>host</em>]:<em>port</em></p>
</dd>
<dd><p><code>-l</code> [<em>host</em>]:<em>port</em></p>
</dd>
<dt>Default value</dt>
<dd><p><code>localhost:8080</code></p>
</dd>
</dl>
<h2 id="name"><code>name</code></h2>
<p>In <code>pukcab</code>, a name is associated with each backup when it’s created. It is a free-form text string.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>--name</code>[=]<em>name</em></p>
</dd>
<dd><p><code>-n</code> <em>name</em></p>
</dd>
<dt>Default value</dt>
<dd><p>current host name (output of the <code>hostname</code> command)</p>
</dd>
</dl>
<h2 id="schedule"><code>schedule</code></h2>
<p>In <code>pukcab</code>, a retention schedule is associated with each backup when it’s created and is used when expiring old backups. It is a free-form text string but common values include <code>daily</code>, <code>weekly</code>, <code>monthly</code>, etc.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>--schedule</code>[=]<em>schedule</em></p>
</dd>
<dd><p><code>-r</code> <em>schedule</em></p>
</dd>
<dt>Default value</dt>
<dd><p>(the default value depends on the current day)</p>
</dd>
<dd><p><code>daily</code> from Monday to Saturday</p>
</dd>
<dd><p><code>weekly</code> on Sunday</p>
</dd>
<dd><p><code>monthly</code> on the 1st of the month</p>
</dd>
<dd><p><code>yearly</code> on 1st January</p>
</dd>
</dl>
<h2 id="short"><code>short</code></h2>
<p>Display a more concise output.</p>
<dl>
<dt>Syntax</dt>
<dd><p><code>--short</code>[<code>=true</code>]</p>
</dd>
<dd><p><code>--short=false</code></p>
</dd>
<dd><p><code>-s</code></p>
</dd>
<dt>Default value</dt>
<dd><p><code>false</code></p>
</dd>
</dl>
<h2 id="files">Files</h2>
<p>File names can be specified using the usual shell-like wildcards <code>*</code> (matches any number of characters) and <code>?</code> (matches exactly one character). The following conventions apply:</p>
<ul>
<li>file names starting with a slash (‘<code>/</code>’) are absolute</li>
<li>file names not starting with a slash (‘<code>/</code>’) are relative</li>
<li>specifying a directory name also selects all the files underneath</li>
</ul>
<h3 id="examples-1">Examples</h3>
<ul>
<li><code>/home</code> includes <code>/home/john</code>, <code>/home/dave</code>, etc. and all the files they contain (i.e. all users’ home directories)</li>
<li><code>*.jpg</code> includes all <code>.jpg</code> files (JPEG images) in all directories</li>
<li><code>/etc/yum.repos.d/*.repo</code> includes all repositories configured in Yum</li>
<li><code>/lib</code> includes <code>/lib</code> and all the files underneath but not <code>/usr/lib</code>, <code>/var/lib</code>, etc.</li>
</ul>
<h1 id="examples-2">Examples</h1>
<ol type="1">
<li>Launch a new backup - default options</li>
</ol>
<pre><code>[root@myserver ~]# pukcab backup
[root@myserver ~]#</code></pre>
<ol start="2" type="1">
<li>Launch a new backup - verbose mode</li>
</ol>
<pre><code>[root@myserver ~]# pukcab backup --verbose
Starting backup: name=&quot;myserver&quot; schedule=&quot;daily&quot;
Sending file list... done.
New backup: date=1422549975 files=309733
Previous backup: date=1422505656
Determining files to backup... done.
Incremental backup: date=1422549975 files=35
Sending files... done
[root@myserver ~]#</code></pre>
<ol start="3" type="1">
<li>Verify last backup - default options</li>
</ol>
<pre><code>[root@myserver ~]# pukcab verify
Name:     myserver
Schedule: daily
Date:     1427941113 ( 2015-04-02 04:18:33 +0200 CEST )
Size:     1.6GiB
Files:    50350
Modified: 10
Deleted:  0
Missing:  0
[root@myserver ~]#</code></pre>
<ol start="4" type="1">
<li>Verify last backup - verbose mode</li>
</ol>
<pre><code>[root@myserver ~]# pukcab verify --verbose
Name:     myserver
Schedule: daily
Date:     1427941113 ( 2015-04-02 04:18:33 +0200 CEST )
m /var/lib/chrony
M /var/lib/chrony/drift
M /var/log/cron
M /var/log/journal/5331b849b3844782aab45e85bd890883/system.journal
M /var/log/journal/5331b849b3844782aab45e85bd890883/user-1001.journal
M /var/log/maillog
M /var/log/messages
M /var/log/secure
M /var/spool/anacron/cron.daily
m /var/tmp
Size:     1.6GiB
Files:    50350
Modified: 10
Deleted:  0
Missing:  0
[root@myserver ~]#</code></pre>
<ol start="5" type="1">
<li>Find and recover a deleted file</li>
</ol>
<p>Let’s pretend we want to recover a source RPM for <code>netatalk</code> that was deleted a while ago…</p>
<pre><code>[root@myserver ~]# pukcab history netatalk\*.src.rpm
1422764854 myserver monthly Sun Feb 1 05:38
-rw-rw-r--  support support   1.8MiB Oct 30 17:30 /home/support/Downloads/netatalk-3.1.6-0.0.4.fc21.src.rpm
-rw-rw-r--  support support   1.7MiB Dec  2 19:59 /home/support/Downloads/netatalk-3.1.7-0.1.fc21.src.rpm

1424572858 myserver weekly Sun Feb 22 03:59

1425177758 myserver monthly Sun Mar 1 03:59

1425782947 myserver weekly Sun Mar 8 04:16

1426387616 myserver weekly Sun Mar 15 04:39

1426817749 myserver daily Fri Mar 20 03:31

1426904886 myserver daily Sat Mar 21 04:24

1426990487 myserver weekly Sun Mar 22 03:28

1427076410 myserver daily Mon Mar 23 04:00

1427165785 myserver daily Tue Mar 24 04:42

1427249388 myserver daily Wed Mar 25 03:24
[root@myserver ~]#</code></pre>
<p>We found it! Let’s restore it in-place</p>
<pre><code>[root@myserver ~]# pukcab restore -d 1422764854 -C / netatalk-3.1.7-0.1.fc21.src.rpm
[root@myserver ~]# cd /home/support/Downloads
[root@myserver ~]# ls -l netatalk-3.1.7-0.1.fc21.src.rpm
-rw-rw-r-- 1 support support 1804762 Dec  2 19:59 netatalk-3.1.7-0.1.fc21.src.rpm
[root@myserver ~]#</code></pre>
<h1 id="frequently-asked-questions">Frequently Asked Questions</h1>
<h2 id="client-faq">Client FAQ</h2>
<dl>
<dt>Is there a Windows client?</dt>
<dd><p>No, Windows is currently unsupported. Porting to Windows would require a significant effort and isn’t in the plans. This may change, though.</p>
</dd>
<dt>My first backup is taking forever! What should I do?</dt>
<dd><p>Wait. Another option is to make sure you didn’t forget to <a href="#including-excluding-items">exclude</a> useless or volatile data like * big <code>Downloads</code> folders * caches (Firefox, Safari, Thunderbird tend to keep gigabytes of throw-away data) * backups * temporary files you forgot to delete</p>
</dd>
<dt>My first backup is <em>still</em> taking forever! What should I do?</dt>
<dd><p>If necessary, you can interrupt it and <a href="#continue">continue</a> later (<code>pukcab</code> will think a bit and restart where it was interrupted). Once the first backup is complete, you can take a second one and get rid (with <a href="#delete">delete</a>) of the first one as many files may have changed during such a long backup.</p>
</dd>
</dl>
<h2 id="server-faq">Server FAQ</h2>
<dl>
<dt>Is there a Windows server?</dt>
<dd><p>No, and there problably never will. If you’re seriously considering trusting a Windows server with your most precious data, we humbly suggest reconsidering your backup strategy.</p>
</dd>
<dt>Which filesystem should I use for the catalog? Can I use a network filesystem?</dt>
<dd><p>No, it must be stored on a local filesystem. You will need a fast filesystem able to deal with potentially big files (several gigabytes are not uncommon) that will be created and removed on the fly. For stability and performance reasons, you should prefer native filesystems, do NOT use NTFS, FAT or <a href="https://en.wikipedia.org/wiki/Filesystem_in_Userspace">FUSE</a>-based filesystems.</p>
</dd>
</dl>
<ul>
<li>under Linux, you can use <a href="https://en.wikipedia.org/wiki/Ext3">ext3</a>/<a href="https://en.wikipedia.org/wiki/Ext4">ext4</a>, <a href="https://en.wikipedia.org/wiki/XFS">XFS</a>, <a href="https://en.wikipedia.org/wiki/Btrfs">Btrfs</a>, <a href="https://en.wikipedia.org/wiki/ReiserFS">ReiserFS</a>, <a href="https://en.wikipedia.org/wiki/JFS_%28file_system%29">JFS</a></li>
<li>under OS X, you can use <a href="https://support.apple.com/en-us/HT201711">HFS+</a></li>
</ul>
<dl>
<dt>Which filesystem should I use for the vault? Can I use a network filesystem?</dt>
<dd><p>Yes, the vault can be on a remote filesystem. You will need a fast filesystem able to deal with potentially big files and, more importantly, with many files (often thousands and thousands) <em>in the same directory</em>. For that reason, do NOT use NTFS, FAT but you can use <a href="https://en.wikipedia.org/wiki/Filesystem_in_Userspace">FUSE</a>-based filesystems if they don’t put a limit on the number of files.</p>
</dd>
</dl>
<ul>
<li>under Linux, you can use <a href="https://en.wikipedia.org/wiki/Ext3">ext3</a>/<a href="https://en.wikipedia.org/wiki/Ext4">ext4</a>, <a href="https://en.wikipedia.org/wiki/XFS">XFS</a>, <a href="https://en.wikipedia.org/wiki/Btrfs">Btrfs</a>, <a href="https://en.wikipedia.org/wiki/ReiserFS">ReiserFS</a>, <a href="https://en.wikipedia.org/wiki/JFS_%28file_system%29">JFS</a>, <a href="https://en.wikipedia.org/wiki/Network_File_System">NFS</a>, <a href="https://en.wikipedia.org/wiki/Server_Message_Block">SMB</a>, <a href="https://en.wikipedia.org/wiki/Andrew_File_System">AFS</a>…</li>
<li>under OS X, you can use <a href="https://support.apple.com/en-us/HT201711">HFS+</a>, <a href="https://en.wikipedia.org/wiki/Apple_Filing_Protocol">AFP</a>, <a href="https://en.wikipedia.org/wiki/Network_File_System">NFS</a>, <a href="https://en.wikipedia.org/wiki/Server_Message_Block">SMB</a>…</li>
</ul>
<dl>
<dt>What are these <code>catalog.db-wal</code> and <code>catalog.db-shm</code> files? Can I remove them?</dt>
<dd><p>Short answer: don’t, you would lose backups!</p>
</dd>
<dd>These files are used to ensure safe concurrent access to the catalog to multiple <code>pukcab</code> instances. They are created and deleted automatically, there is no need for you to worry about them.
</dd>
<dt>What is this <code>catalog.db~</code> file? Can I remove it?</dt>
<dd><p>Short answer: you can, but it’s not recommended.</p>
</dd>
<dd>This file is an automatic backup of your catalog that is created right after each <a href="#expire">expire</a> command. It may therefore be slightly obsolete but it can be used for recovery in case the live catalog gets destroyed/corrupted.
</dd>
<dt>But <code>catalog.db-wal</code> is becoming huge! Can I shrink it?</dt>
<dd><p>Short answer: it will shrink when <code>pukcab</code> is done with what it is doing, or after the next <a href="#expire">expire</a> command.</p>
</dd>
<dd>Depending of the number and length of concurrent operations, <code>pukcab</code> may make heavy use of this working file. You can reduce its maximum size by limiting the number of concurrent operations you run (i.e. you can serialise the <a href="#backup">backup</a> commands).
</dd>
<dd>If that doesn’t help, you can force-clean it by using <a href="#vacuum">vacuum</a>
</dd>
<dd>If that still doesn’t help, make sure no <code>pukcab</code> operation is running and issue the following command
</dd>
</dl>
<pre><code>sqlite3 catalog.db .schema</code></pre>
<ul>
<li>replace <code>catalog.db</code> by your catalog’s path</li>
<li>you may need to install <a href="http://www.sqlite.org/">SQLite</a></li>
<li>this command must be run as the <code>pukcab</code> user <em>on the server</em></li>
<li>this command will (probably) take very long and block any backup until it has completed</li>
</ul>
<h1 id="internals">Internals</h1>
<h2 id="logging">Logging</h2>
<p><code>pukcab</code> tries to generate useful log records by including easy-to-parse details into the events it sends to <a href="https://tools.ietf.org/html/rfc5424">syslog</a>, like in the following examples (from a Linux box):</p>
<pre><code>Oct 21 08:25:40 server pukcab(newbackup)[16993]: Creating backup set: date=1445391440 name=&quot;client&quot; schedule=&quot;daily&quot;
Oct 21 08:36:19 client pukcab(backup)[27001]: Could not backup file=&quot;/var/log/httpd/access_log&quot; msg=&quot;size changed during backup&quot; name=&quot;client&quot; date=1445391440 error=warn</code></pre>
<p>The <a href="https://tools.ietf.org/html/rfc5424">syslog</a> <em>APP-NAME</em> field includes the command that generated the event: <code>pukcab(</code><em>command</em><code>)</code></p>
<p>The rest of the event uses the following format: <em>message</em> [ [<em>field</em>=<em>value</em>] … ]</p>
<table>
<caption>fields definition</caption>
<thead>
<tr class="header">
<th style="text-align: left;">field</th>
<th style="text-align: left;">type</th>
<th style="text-align: left;">unit</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>date</code></td>
<td style="text-align: left;">number</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">backup <a href="#date">date</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>duration</code></td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">seconds</td>
<td style="text-align: left;">execution time of the current command</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>elapsed</code></td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">seconds</td>
<td style="text-align: left;">total execution time</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>error</code></td>
<td style="text-align: left;">token</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">error severity (<code>fatal</code> / <code>warn</code>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>file</code></td>
<td style="text-align: left;">text</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">file name</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>files</code></td>
<td style="text-align: left;">number</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">total number of files</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>msg</code></td>
<td style="text-align: left;">text</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">human-readable error message</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>name</code></td>
<td style="text-align: left;">text</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">backup <a href="#name">name</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>received</code></td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">bytes</td>
<td style="text-align: left;">amount of data received by the current command</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>schedule</code></td>
<td style="text-align: left;">text</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">backup <a href="#schedule">schedule</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>type</code></td>
<td style="text-align: left;">token</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">backup type (<code>incremental</code> / <code>full</code>)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>sent</code></td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">bytes</td>
<td style="text-align: left;">amount of data sent by the current command</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>size</code></td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">bytes</td>
<td style="text-align: left;">total amount of data</td>
</tr>
</tbody>
</table>
<p>text values are quoted (<code>&quot;text value&quot;</code>)</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Basically, only configuration files and user data require disk space — that’s a blatant lie, the catalog uses disk space, too (but hopefully much less).<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>This might change in the future, though.<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>The main development platform is Fedora Linux x86-64.<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>Some old Pentium III machines may misbehave.<a href="#fnref4">↩</a></p></li>
<li id="fn5"><p>Linux users should prefer <a href="http://ezix.org/download/?package=rpm.pukcab.ezix.org">RPM packages</a> or check if their distribution already includes <code>pukcab</code>.<a href="#fnref5">↩</a></p></li>
<li id="fn6"><p>To rebuild <code>pukcab</code>, you will need a <a href="http://golang.org">Go</a> development environment (and some courage).<a href="#fnref6">↩</a></p></li>
<li id="fn7"><p><code>pukcab</code> will <em>silently</em> delete anything you may store there<a href="#fnref7">↩</a></p></li>
<li id="fn8"><p>Shell patterns include at least one <code>*</code> or <code>?</code> special character, with their usual meaning<a href="#fnref8">↩</a></p></li>
</ol>
</section>
</body>
</html>
